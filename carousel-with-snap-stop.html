<!doctype html>
<html lang="en">

<head>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="/style.css">
  <link rel="stylesheet" href="./carousel-with-snap-stop.css">
</head>



 
<p>Below is a gallery where every item is the same size and centered. </p>
<p>
<label for="alignment">Alignment:</label>
<select id="alignment_option">
  <option value="start">Start</option>
  <option value="center" selected>Center</option>
  <option value="end">End</option>
  <option value="none">None</option>
</select>
</p>
<p>
<label for="stop">Snap Stop:</label>
<select id="stop_option">
  <option value="always" selected> Always</option>
  <option value="normal">Normal</option>
</select>
</p>
  
<div id="paginated_gallery" class="gallery">
  <div class="gallery_scroller">
    <div class="colored_card"> <p>1 </p></div>
    <div class="colored_card"> <p>2 </p></div>
    <div class="colored_card"> <p>3 </p></div>
    <div class="colored_card"> <p>4 </p></div>
    <div class="colored_card"> <p>5 </p></div>
    <div class="colored_card"> <p>6 </p></div>
    <div class="colored_card"> <p>7 </p></div>
    <div class="colored_card"> <p>8 </p></div>
    <div class="colored_card"> <p>9 </p></div>
    <div class="colored_card"> <p>10</p> </div>
    <div class="colored_card"> <p>11</p> </div>
    <div class="colored_card"> <p>12</p> </div>
    <div class="colored_card"> <p>13</p> </div>
    <div class="colored_card"> <p>14</p> </div>
    <div class="colored_card"> <p>15</p> </div>
    <div class="colored_card"> <p>16</p> </div>
    <div class="colored_card"> <p>17</p> </div>
    <div class="colored_card"> <p>18</p> </div>
    <div class="colored_card"> <p>19</p> </div>
    <div class="colored_card"> <p>20</p> </div>
  </div>
  <span class="btn prev"></span>
  <span class="btn next"></span>
</div>


<p>
  CSS Scroll Snapping works well even when snap targets have different size or
  when they are larger than the scroller!
</p>
<div class="gallery">
  <div class="gallery_scroller">
    <div>
      <img src="https://placeimg.com/480/480/animals/grayscale">
    </div>
    <div>
      <img src="https://placeimg.com/360/480/animals/grayscale">
    </div>
    <div>
      <img src="https://placeimg.com/640/480/animals/grayscale">
    </div>
    <div>
      <img src="https://placeimg.com/360/360/animals/grayscale">
    </div>
    <div>
      <img src="https://placeimg.com/2560/960/animals/grayscale">
      <div class="note">Image is larger than container so it can be panned freely.</div>
    </div>
    <div>
      <img src="https://placeimg.com/480/480/animals/grayscale">
    </div>
    <div>
      <img src="https://placeimg.com/360/360/animals/grayscale">
    </div>
    <div>
      <img src="https://placeimg.com/640/480/animals/grayscale">
    </div>
  </div>
</div>


<script>
  
const gallery = document.querySelector('#paginated_gallery');
const gallery_scroller = gallery.querySelector('.gallery_scroller');
const gallery_item_size = gallery_scroller.querySelector('div').clientWidth;

gallery.querySelector('.btn.next').addEventListener('click', scrollToNextPage);
gallery.querySelector('.btn.prev').addEventListener('click', scrollToPrevPage);

document.querySelector('#alignment_option').addEventListener('change', updateAlignmentOrStop);
document.querySelector('#stop_option').addEventListener('change', updateAlignmentOrStop);
updateAlignmentOrStop();

  
// For paginated scrolling, simply scroll the gallery one item in the given
// direction and let css scroll snaping handle the specific alignment.
function scrollToNextPage() {
  gallery_scroller.scrollTo(gallery_scroller.scrollLeft + gallery_item_size, 0);
}
function scrollToPrevPage() {
  gallery_scroller.scrollTo(gallery_scroller.scrollLeft - gallery_item_size, 0);
}

function updateAlignmentOrStop() {
  const alignment = document.querySelector('#alignment_option').value;
  const stop = document.querySelector('#stop_option').value;

  for (item of gallery.querySelectorAll('.gallery_scroller > div')) {
    item.style.scrollSnapAlign = alignment;
    item.style.scrollSnapStop = stop;
  }

  // Currently changing scroll alignment does not force a re-snap in Chrome.
  // This is a bug: http://crbug.com/866127
  // In meantime, if desired a scroll snap can be triggered using a small 
  // scripted scroll e.g.: `gallery_scroller.scrollBy(1, 0);`
}


</script>
  
</html>